<% if @comment.persisted? %>
  $('#new_comment').replaceWith('<%= j render(template: 'comments/show', format: :html) %>');
  $("#<%= @comment.anchor %>").effect('highlight', 'slow').before(
    '<%= j render(template: 'comments/new', format: :html, locals: { :@comment => Comment.new }) %>'
  );
  $('#comment_comment').focus();
<% else %>
  $('#new_comment').replaceWith('<%= j render(template: 'comments/new', format: :html) %>');
<% end %>
