<% columns = 3 %>
<% if @news.empty? %>
  <%= render 'shared/empty_index' %>
<% else %>
  <div class="news_columns">
  <% @news.each_slice(columns) do |news_row| %>
    <div class="row-fluid">
      <ul class="thumbnails">
        <% news_row.each do |news| %>
          <li class="span4">
            <div class="thumbnail">
              <%== news.images.first.to_html(:normal) unless news.images.empty? %>
              <div class="caption">
                <h4 class="text-info"><%= link_to news.title, news %></h4>
                <p><small><%= markdown news.description %></small></p>
                <p><%= link_to_comments(news, 
                      news_path(news, anchor: 'comments'), data: { 'no-turbolink' => true }) %></p>
              </div>
            </div>
            <hr />
          </li>
        <% end %>
      </ul>
    </div>
  <% end %>
  </div>
<% end %>

<% unless request.xhr? %>
  <%= pagination_links(@news) %>

  <div class="form-actions">
    <%= link_to(
      t('view.news.new', default: :'label.new'),
      new_news_path, class: 'btn btn-primary'
    ) if can? :create, News %>
  </div>
<% end %>
